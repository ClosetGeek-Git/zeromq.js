<!doctypehtml><html class=default lang=en><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>zeromq.js</title><meta name=description content="Documentation for zeromq.js"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=assets/style.css><link rel=stylesheet href=assets/highlight.css><script async src=assets/search.js id=search-script></script><body><script>document.documentElement.dataset.theme=localStorage.getItem("tsd-theme")||"os"</script><header class=tsd-page-toolbar><div class="tsd-toolbar-contents container"><div class=table-cell id=tsd-search data-base=.><div class=field><label for=tsd-search-field class="tsd-widget tsd-toolbar-icon search no-caption"><svg width=16 height=16 viewBox="0 0 16 16"fill=none><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z"fill=var(--color-text)></path></svg></label><input type=text id=tsd-search-field aria-label=Search></div><div class=field><div id=tsd-toolbar-links></div></div><ul class=results><li class="state loading">Preparing search index...<li class="state failure">The search index is not available</ul><a href=index.html class=title>zeromq.js</a></div><div class=table-cell id=tsd-widgets><a href=# class="tsd-widget tsd-toolbar-icon menu no-caption"data-toggle=menu aria-label=Menu><svg width=16 height=16 viewBox="0 0 16 16"fill=none><rect x=1 y=3 width=14 height=2 fill=var(--color-text)></rect><rect x=1 y=7 width=14 height=2 fill=var(--color-text)></rect><rect x=1 y=11 width=14 height=2 fill=var(--color-text)></rect></svg></a></div></div></header><div class="container container-main"><div class="col-8 col-content"><div class=tsd-page-title><h2>zeromq.js</h2></div><div class="tsd-panel tsd-typography"><a href=#zeromqjs-next-generation id=zeromqjs-next-generation style=color:inherit;text-decoration:none><h1>ZeroMQ.js Next Generation</h1></a><p><a href=https://www.npmjs.com/package/zeromq><img src="https://img.shields.io/npm/v/zeromq?label=version"alt="Latest version"></a><a href=https://greenkeeper.io/ ><img src=https://img.shields.io/badge/dependencies-monitored-brightgreen alt="Greenkeeper monitoring"></a><a href=https://travis-ci.org/zeromq/zeromq.js><img src=https://img.shields.io/travis/zeromq/zeromq.js alt="Travis build status"></a></p><a href=#⚠️-version-600-in-beta-features-a-brand-new-api-that-solves-many-fundamental-issues-and-is-recommended-for-new-projects-⚠️ id=⚠️-version-600-in-beta-features-a-brand-new-api-that-solves-many-fundamental-issues-and-is-recommended-for-new-projects-⚠️ style=color:inherit;text-decoration:none><h2>⚠️ Version 6.0.0 (in beta) features a brand new API that solves many fundamental issues and is recommended for new projects. ⚠️</h2></a><a href=#⚠️-for-the-current-stable-version-see-the-5x-branch-⚠️ id=⚠️-for-the-current-stable-version-see-the-5x-branch-⚠️ style=color:inherit;text-decoration:none><h2>⚠️ For the current stable version see the <a href=https://github.com/zeromq/zeromq.js/tree/5.x>5.x branch</a> ⚠️</h2></a><p><a href=http://zeromq.org>ØMQ</a> bindings for Node.js. The goals of this library are:<ul><li>Semantically similar to the <a href=https://github.com/zeromq/libzmq>native</a> ØMQ library, while sticking to JavaScript idioms.<li>Use modern JavaScript and Node.js features such as <code>async</code>/<code>await</code> and async iterators.<li>High performance.<li>Fully usable with TypeScript (3+).</ul><a href=#useful-links id=useful-links style=color:inherit;text-decoration:none><h2>Useful links</h2></a><ul><li><a href=http://zeromq.github.io/zeromq.js/globals.html>ZeroMQ.js API reference</a>.<li><a href=https://zeromq.org/get-started/ >ZeroMQ project documentation</a>.<ul><li><strong>Note:</strong> The Node.js examples on zeromq.org do not yet reflect the new API, but <a href=http://zguide.zeromq.org>the Guide</a> in particular is still a good introduction to ZeroMQ for new users.</ul></ul><a href=#table-of-contents id=table-of-contents style=color:inherit;text-decoration:none><h2>Table of contents</h2></a><ul><li><a href=#installation>Installation</a><ul><li><a href=#prebuilt-binaries>Prebuilt binaries</a><li><a href=#building-from-source>Building from source</a></ul><li><a href=#examples>Examples</a><ul><li><a href=#pushpull>Push/Pull</a><li><a href=#pubsub>Pub/Sub</a><li><a href=#reqrep>Req/Rep</a><li><a href=#typescript>TypeScript</a><li><a href=#more-examples>More examples</a><li><a href=#compatibility-layer-for-version-45>Compatibility layer for version 4/5</a></ul><li><a href=#contribution>Contribution</a><li><a href=#history>History</a></ul><a href=#installation id=installation style=color:inherit;text-decoration:none><h2>Installation</h2></a><p>Install <strong>ZeroMQ.js</strong> with prebuilt binaries:<pre><code class=language-sh><span class=hl-0>npm install zeromq@6.0.0-beta.18</span>
</code></pre><p>Requirements for using prebuilt binaries:<ul><li>Node.js 10.2+ or Electron 3+ (requires a <a href=https://nodejs.org/api/n-api.html>N-API</a> version 3+)</ul><a href=#prebuilt-binaries id=prebuilt-binaries style=color:inherit;text-decoration:none><h3>Prebuilt binaries</h3></a><p>The following platforms have a <strong>prebuilt binary</strong> available:<ul><li>Linux on x86-64 with libstdc++.so.6.0.21+ (glibc++ 3.4.21+), for example:<ul><li>Debian 9+ (Stretch or later)<li>Ubuntu 16.04+ (Xenial or later)<li>CentOS 8+</ul><li>Linux on x86-64 with musl, for example:<ul><li>Alpine 3.3+</ul><li>MacOS 10.9+ on x86-64<li>Windows on x86/x86-64</ul><p>If a prebuilt binary is not available for your platform, installing will attempt to start a build from source.</p><a href=#building-from-source id=building-from-source style=color:inherit;text-decoration:none><h3>Building from source</h3></a><p>If a prebuilt binary is unavailable or if you want to pass certain options during build, you can build this package from source.<p>Make sure you have the following installed before attempting to build from source:<ul><li>Node.js 10+ or Electron 3+<li>A working C++17 compiler toolchain with make<li>Python 3 with Node 12.13+ (or legacy Python 2.7)<li>CMake 2.8+<li>curl</ul><p>To install from source:<pre><code class=language-sh><span class=hl-0>npm install zeromq@6.0.0-beta.18 --build-from-source</span>
</code></pre><p>If you want to link against a shared ZeroMQ library, you can build skip downloading <code>libzmq</code> and link with the installed library instead as follows:<pre><code class=language-sh><span class=hl-0>npm install zeromq@6.0.0-beta.18 --zmq-shared</span>
</code></pre><p>If you wish to use any DRAFT sockets then it is also necessary to compile the library from source:<pre><code class=language-sh><span class=hl-0>npm install zeromq@6.0.0-beta.18 --zmq-draft</span>
</code></pre><a href=#examples id=examples style=color:inherit;text-decoration:none><h2>Examples</h2></a><p><strong>Note:</strong> These examples assume the reader is familiar with ZeroMQ. If you are new to ZeroMQ, please start with the <a href=https://zeromq.org/get-started/ >ZeroMQ documentation</a>.<p>More examples can be found in the <a href=examples>examples directory</a>.</p><a href=#pushpull id=pushpull style=color:inherit;text-decoration:none><h3>Push/Pull</h3></a><p>This example demonstrates how a producer pushes information onto a socket and how a worker pulls information from the socket.</p><a href=#producerjs id=producerjs style=color:inherit;text-decoration:none><h4><code>producer.js</code></h4></a><p>Creates a producer to push information onto a socket.<pre><code class=language-js><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>zmq</span><span class=hl-0> = </span><span class=hl-3>require</span><span class=hl-0>(</span><span class=hl-4>&quot;zeromq&quot;</span><span class=hl-0>)</span><br><br><span class=hl-1>async</span><span class=hl-0> </span><span class=hl-1>function</span><span class=hl-0> </span><span class=hl-3>run</span><span class=hl-0>() {</span><br><span class=hl-0>  </span><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>sock</span><span class=hl-0> = </span><span class=hl-1>new</span><span class=hl-0> </span><span class=hl-5>zmq</span><span class=hl-0>.</span><span class=hl-5>Push</span><br><br><span class=hl-0>  </span><span class=hl-6>await</span><span class=hl-0> </span><span class=hl-5>sock</span><span class=hl-0>.</span><span class=hl-3>bind</span><span class=hl-0>(</span><span class=hl-4>&quot;tcp://127.0.0.1:3000&quot;</span><span class=hl-0>)</span><br><span class=hl-0>  </span><span class=hl-5>console</span><span class=hl-0>.</span><span class=hl-3>log</span><span class=hl-0>(</span><span class=hl-4>&quot;Producer bound to port 3000&quot;</span><span class=hl-0>)</span><br><br><span class=hl-0>  </span><span class=hl-6>while</span><span class=hl-0> (</span><span class=hl-1>true</span><span class=hl-0>) {</span><br><span class=hl-0>    </span><span class=hl-6>await</span><span class=hl-0> </span><span class=hl-5>sock</span><span class=hl-0>.</span><span class=hl-3>send</span><span class=hl-0>(</span><span class=hl-4>&quot;some work&quot;</span><span class=hl-0>)</span><br><span class=hl-0>    </span><span class=hl-6>await</span><span class=hl-0> </span><span class=hl-1>new</span><span class=hl-0> </span><span class=hl-7>Promise</span><span class=hl-0>(</span><span class=hl-5>resolve</span><span class=hl-0> </span><span class=hl-1>=&gt;</span><span class=hl-0> { </span><span class=hl-3>setTimeout</span><span class=hl-0>(</span><span class=hl-5>resolve</span><span class=hl-0>, </span><span class=hl-8>500</span><span class=hl-0>) })</span><br><span class=hl-0>  }</span><br><span class=hl-0>}</span><br><br><span class=hl-3>run</span><span class=hl-0>()</span>
</code></pre><a href=#workerjs id=workerjs style=color:inherit;text-decoration:none><h4><code>worker.js</code></h4></a><p>Creates a worker to pull information from the socket.<pre><code class=language-js><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>zmq</span><span class=hl-0> = </span><span class=hl-3>require</span><span class=hl-0>(</span><span class=hl-4>&quot;zeromq&quot;</span><span class=hl-0>)</span><br><br><span class=hl-1>async</span><span class=hl-0> </span><span class=hl-1>function</span><span class=hl-0> </span><span class=hl-3>run</span><span class=hl-0>() {</span><br><span class=hl-0>  </span><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>sock</span><span class=hl-0> = </span><span class=hl-1>new</span><span class=hl-0> </span><span class=hl-5>zmq</span><span class=hl-0>.</span><span class=hl-5>Pull</span><br><br><span class=hl-0>  </span><span class=hl-5>sock</span><span class=hl-0>.</span><span class=hl-3>connect</span><span class=hl-0>(</span><span class=hl-4>&quot;tcp://127.0.0.1:3000&quot;</span><span class=hl-0>)</span><br><span class=hl-0>  </span><span class=hl-5>console</span><span class=hl-0>.</span><span class=hl-3>log</span><span class=hl-0>(</span><span class=hl-4>&quot;Worker connected to port 3000&quot;</span><span class=hl-0>)</span><br><br><span class=hl-0>  </span><span class=hl-6>for</span><span class=hl-0> </span><span class=hl-6>await</span><span class=hl-0> (</span><span class=hl-1>const</span><span class=hl-0> [</span><span class=hl-2>msg</span><span class=hl-0>] </span><span class=hl-1>of</span><span class=hl-0> </span><span class=hl-5>sock</span><span class=hl-0>) {</span><br><span class=hl-0>    </span><span class=hl-5>console</span><span class=hl-0>.</span><span class=hl-3>log</span><span class=hl-0>(</span><span class=hl-4>&quot;work: %s&quot;</span><span class=hl-0>, </span><span class=hl-5>msg</span><span class=hl-0>.</span><span class=hl-3>toString</span><span class=hl-0>())</span><br><span class=hl-0>  }</span><br><span class=hl-0>}</span><br><br><span class=hl-3>run</span><span class=hl-0>()</span>
</code></pre><a href=#pubsub id=pubsub style=color:inherit;text-decoration:none><h3>Pub/Sub</h3></a><p>This example demonstrates using <code>zeromq</code> in a classic Pub/Sub, Publisher/Subscriber, application.</p><a href=#publisherjs id=publisherjs style=color:inherit;text-decoration:none><h4><code>publisher.js</code></h4></a><p>Create the publisher which sends messages.<pre><code class=language-js><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>zmq</span><span class=hl-0> = </span><span class=hl-3>require</span><span class=hl-0>(</span><span class=hl-4>&quot;zeromq&quot;</span><span class=hl-0>)</span><br><br><span class=hl-1>async</span><span class=hl-0> </span><span class=hl-1>function</span><span class=hl-0> </span><span class=hl-3>run</span><span class=hl-0>() {</span><br><span class=hl-0>  </span><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>sock</span><span class=hl-0> = </span><span class=hl-1>new</span><span class=hl-0> </span><span class=hl-5>zmq</span><span class=hl-0>.</span><span class=hl-5>Publisher</span><br><br><span class=hl-0>  </span><span class=hl-6>await</span><span class=hl-0> </span><span class=hl-5>sock</span><span class=hl-0>.</span><span class=hl-3>bind</span><span class=hl-0>(</span><span class=hl-4>&quot;tcp://127.0.0.1:3000&quot;</span><span class=hl-0>)</span><br><span class=hl-0>  </span><span class=hl-5>console</span><span class=hl-0>.</span><span class=hl-3>log</span><span class=hl-0>(</span><span class=hl-4>&quot;Publisher bound to port 3000&quot;</span><span class=hl-0>)</span><br><br><span class=hl-0>  </span><span class=hl-6>while</span><span class=hl-0> (</span><span class=hl-1>true</span><span class=hl-0>) {</span><br><span class=hl-0>    </span><span class=hl-5>console</span><span class=hl-0>.</span><span class=hl-3>log</span><span class=hl-0>(</span><span class=hl-4>&quot;sending a multipart message envelope&quot;</span><span class=hl-0>)</span><br><span class=hl-0>    </span><span class=hl-6>await</span><span class=hl-0> </span><span class=hl-5>sock</span><span class=hl-0>.</span><span class=hl-3>send</span><span class=hl-0>([</span><span class=hl-4>&quot;kitty cats&quot;</span><span class=hl-0>, </span><span class=hl-4>&quot;meow!&quot;</span><span class=hl-0>])</span><br><span class=hl-0>    </span><span class=hl-6>await</span><span class=hl-0> </span><span class=hl-1>new</span><span class=hl-0> </span><span class=hl-7>Promise</span><span class=hl-0>(</span><span class=hl-5>resolve</span><span class=hl-0> </span><span class=hl-1>=&gt;</span><span class=hl-0> { </span><span class=hl-3>setTimeout</span><span class=hl-0>(</span><span class=hl-5>resolve</span><span class=hl-0>, </span><span class=hl-8>500</span><span class=hl-0>) })</span><br><span class=hl-0>  }</span><br><span class=hl-0>}</span><br><br><span class=hl-3>run</span><span class=hl-0>()</span>
</code></pre><a href=#subscriberjs id=subscriberjs style=color:inherit;text-decoration:none><h4><code>subscriber.js</code></h4></a><p>Create a subscriber to connect to a publisher&#39;s port to receive messages.<pre><code class=language-js><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>zmq</span><span class=hl-0> = </span><span class=hl-3>require</span><span class=hl-0>(</span><span class=hl-4>&quot;zeromq&quot;</span><span class=hl-0>)</span><br><br><span class=hl-1>async</span><span class=hl-0> </span><span class=hl-1>function</span><span class=hl-0> </span><span class=hl-3>run</span><span class=hl-0>() {</span><br><span class=hl-0>  </span><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>sock</span><span class=hl-0> = </span><span class=hl-1>new</span><span class=hl-0> </span><span class=hl-5>zmq</span><span class=hl-0>.</span><span class=hl-5>Subscriber</span><br><br><span class=hl-0>  </span><span class=hl-5>sock</span><span class=hl-0>.</span><span class=hl-3>connect</span><span class=hl-0>(</span><span class=hl-4>&quot;tcp://127.0.0.1:3000&quot;</span><span class=hl-0>)</span><br><span class=hl-0>  </span><span class=hl-5>sock</span><span class=hl-0>.</span><span class=hl-3>subscribe</span><span class=hl-0>(</span><span class=hl-4>&quot;kitty cats&quot;</span><span class=hl-0>)</span><br><span class=hl-0>  </span><span class=hl-5>console</span><span class=hl-0>.</span><span class=hl-3>log</span><span class=hl-0>(</span><span class=hl-4>&quot;Subscriber connected to port 3000&quot;</span><span class=hl-0>)</span><br><br><span class=hl-0>  </span><span class=hl-6>for</span><span class=hl-0> </span><span class=hl-6>await</span><span class=hl-0> (</span><span class=hl-1>const</span><span class=hl-0> [</span><span class=hl-2>topic</span><span class=hl-0>, </span><span class=hl-2>msg</span><span class=hl-0>] </span><span class=hl-1>of</span><span class=hl-0> </span><span class=hl-5>sock</span><span class=hl-0>) {</span><br><span class=hl-0>    </span><span class=hl-5>console</span><span class=hl-0>.</span><span class=hl-3>log</span><span class=hl-0>(</span><span class=hl-4>&quot;received a message related to:&quot;</span><span class=hl-0>, </span><span class=hl-5>topic</span><span class=hl-0>, </span><span class=hl-4>&quot;containing message:&quot;</span><span class=hl-0>, </span><span class=hl-5>msg</span><span class=hl-0>)</span><br><span class=hl-0>  }</span><br><span class=hl-0>}</span><br><br><span class=hl-3>run</span><span class=hl-0>()</span>
</code></pre><a href=#reqrep id=reqrep style=color:inherit;text-decoration:none><h3>Req/Rep</h3></a><p>This example illustrates a request from a client and a reply from a server.</p><a href=#clientjs id=clientjs style=color:inherit;text-decoration:none><h4><code>client.js</code></h4></a><pre><code class=language-js><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>zmq</span><span class=hl-0> = </span><span class=hl-3>require</span><span class=hl-0>(</span><span class=hl-4>&quot;zeromq&quot;</span><span class=hl-0>)</span><br><br><span class=hl-1>async</span><span class=hl-0> </span><span class=hl-1>function</span><span class=hl-0> </span><span class=hl-3>run</span><span class=hl-0>() {</span><br><span class=hl-0>  </span><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>sock</span><span class=hl-0> = </span><span class=hl-1>new</span><span class=hl-0> </span><span class=hl-5>zmq</span><span class=hl-0>.</span><span class=hl-5>Request</span><br><br><span class=hl-0>  </span><span class=hl-5>sock</span><span class=hl-0>.</span><span class=hl-3>connect</span><span class=hl-0>(</span><span class=hl-4>&quot;tcp://127.0.0.1:3000&quot;</span><span class=hl-0>)</span><br><span class=hl-0>  </span><span class=hl-5>console</span><span class=hl-0>.</span><span class=hl-3>log</span><span class=hl-0>(</span><span class=hl-4>&quot;Producer bound to port 3000&quot;</span><span class=hl-0>)</span><br><br><span class=hl-0>  </span><span class=hl-6>await</span><span class=hl-0> </span><span class=hl-5>sock</span><span class=hl-0>.</span><span class=hl-3>send</span><span class=hl-0>(</span><span class=hl-4>&quot;4&quot;</span><span class=hl-0>)</span><br><span class=hl-0>  </span><span class=hl-1>const</span><span class=hl-0> [</span><span class=hl-2>result</span><span class=hl-0>] = </span><span class=hl-6>await</span><span class=hl-0> </span><span class=hl-5>sock</span><span class=hl-0>.</span><span class=hl-3>receive</span><span class=hl-0>()</span><br><br><span class=hl-0>  </span><span class=hl-5>console</span><span class=hl-0>.</span><span class=hl-3>log</span><span class=hl-0>(</span><span class=hl-5>result</span><span class=hl-0>)</span><br><span class=hl-0>}</span><br><br><span class=hl-3>run</span><span class=hl-0>()</span>
</code></pre><a href=#serverjs id=serverjs style=color:inherit;text-decoration:none><h4><code>server.js</code></h4></a><pre><code class=language-js><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>zmq</span><span class=hl-0> = </span><span class=hl-3>require</span><span class=hl-0>(</span><span class=hl-4>&quot;zeromq&quot;</span><span class=hl-0>)</span><br><br><span class=hl-1>async</span><span class=hl-0> </span><span class=hl-1>function</span><span class=hl-0> </span><span class=hl-3>run</span><span class=hl-0>() {</span><br><span class=hl-0>  </span><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>sock</span><span class=hl-0> = </span><span class=hl-1>new</span><span class=hl-0> </span><span class=hl-5>zmq</span><span class=hl-0>.</span><span class=hl-5>Reply</span><br><br><span class=hl-0>  </span><span class=hl-6>await</span><span class=hl-0> </span><span class=hl-5>sock</span><span class=hl-0>.</span><span class=hl-3>bind</span><span class=hl-0>(</span><span class=hl-4>&quot;tcp://127.0.0.1:3000&quot;</span><span class=hl-0>)</span><br><br><span class=hl-0>  </span><span class=hl-6>for</span><span class=hl-0> </span><span class=hl-6>await</span><span class=hl-0> (</span><span class=hl-1>const</span><span class=hl-0> [</span><span class=hl-2>msg</span><span class=hl-0>] </span><span class=hl-1>of</span><span class=hl-0> </span><span class=hl-5>sock</span><span class=hl-0>) {</span><br><span class=hl-0>    </span><span class=hl-6>await</span><span class=hl-0> </span><span class=hl-5>sock</span><span class=hl-0>.</span><span class=hl-3>send</span><span class=hl-0>(</span><span class=hl-8>2</span><span class=hl-0> * </span><span class=hl-3>parseInt</span><span class=hl-0>(</span><span class=hl-5>msg</span><span class=hl-0>, </span><span class=hl-8>10</span><span class=hl-0>))</span><br><span class=hl-0>  }</span><br><span class=hl-0>}</span><br><br><span class=hl-3>run</span><span class=hl-0>()</span>
</code></pre><a href=#typescript id=typescript style=color:inherit;text-decoration:none><h2>TypeScript</h2></a><p>This library provides typings for TypeScript version 3.0.x and later.<p><em>Requirements</em><ul><li>For TypeScript version &gt;= 3:<ul><li><a href=https://www.typescriptlang.org/docs/handbook/compiler-options.html>compilerOptions</a></ul><li>For TypeScript version &lt; 3.6:<ul><li>either set <code>compilerOptions.target</code> to <code>esnext</code> or later (e.g. <code>es2018</code>)<li>or add the following, or similar, libraries to <code>compilerOptions.lib</code> (and include their corresponding polyfills if needed): <code>es2015</code>, <code>ESNext.AsyncIterable</code></ul></ul><p><em>Example Usage</em><pre><code class=language-typescript><span class=hl-6>import</span><span class=hl-0> { </span><span class=hl-5>Request</span><span class=hl-0> } </span><span class=hl-6>from</span><span class=hl-0> </span><span class=hl-4>&quot;zeromq&quot;</span><br><span class=hl-9>// or as namespace</span><br><span class=hl-6>import</span><span class=hl-0> </span><span class=hl-1>*</span><span class=hl-0> </span><span class=hl-6>as</span><span class=hl-0> </span><span class=hl-5>zmq</span><span class=hl-0> </span><span class=hl-6>from</span><span class=hl-0> </span><span class=hl-4>&quot;zeromq&quot;</span><br><br><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>reqSock</span><span class=hl-0> = </span><span class=hl-1>new</span><span class=hl-0> </span><span class=hl-3>Request</span><span class=hl-0>()</span><br><span class=hl-9>//...</span><br><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>repSock</span><span class=hl-0> = </span><span class=hl-1>new</span><span class=hl-0> </span><span class=hl-5>zmq</span><span class=hl-0>.</span><span class=hl-3>Reply</span><span class=hl-0>()</span>
</code></pre><a href=#more-examples id=more-examples style=color:inherit;text-decoration:none><h3>More examples</h3></a><p>More advanced examples can be found in the <a href=examples>examples</a> directory of this repository.<p>Or you can <a href=http://zeromq.github.io/zeromq.js/globals.html>browse the API reference documentation</a> to see all socket types, methods &amp; options as well as more detailed information about how to apply them.</p><a href=#compatibility-layer-for-version-45 id=compatibility-layer-for-version-45 style=color:inherit;text-decoration:none><h3>Compatibility layer for version 4/5</h3></a><p>The next generation version of the library features a compatibility layer for ZeroMQ.js versions 4 and 5. This is recommended for users upgrading from previous versions.<p>Example:<pre><code class=language-js><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>zmq</span><span class=hl-0> = </span><span class=hl-3>require</span><span class=hl-0>(</span><span class=hl-4>&quot;zeromq/v5-compat&quot;</span><span class=hl-0>)</span><br><br><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>pub</span><span class=hl-0> = </span><span class=hl-5>zmq</span><span class=hl-0>.</span><span class=hl-3>socket</span><span class=hl-0>(</span><span class=hl-4>&quot;pub&quot;</span><span class=hl-0>)</span><br><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>sub</span><span class=hl-0> = </span><span class=hl-5>zmq</span><span class=hl-0>.</span><span class=hl-3>socket</span><span class=hl-0>(</span><span class=hl-4>&quot;sub&quot;</span><span class=hl-0>)</span><br><br><span class=hl-5>pub</span><span class=hl-0>.</span><span class=hl-3>bind</span><span class=hl-0>(</span><span class=hl-4>&quot;tcp://*:3456&quot;</span><span class=hl-0>, </span><span class=hl-5>err</span><span class=hl-0> </span><span class=hl-1>=&gt;</span><span class=hl-0> {</span><br><span class=hl-0>  </span><span class=hl-6>if</span><span class=hl-0> (</span><span class=hl-5>err</span><span class=hl-0>) </span><span class=hl-6>throw</span><span class=hl-0> </span><span class=hl-5>err</span><br><br><span class=hl-0>  </span><span class=hl-5>sub</span><span class=hl-0>.</span><span class=hl-3>connect</span><span class=hl-0>(</span><span class=hl-4>&quot;tcp://127.0.0.1:3456&quot;</span><span class=hl-0>)</span><br><br><span class=hl-0>  </span><span class=hl-5>pub</span><span class=hl-0>.</span><span class=hl-3>send</span><span class=hl-0>(</span><span class=hl-4>&quot;message&quot;</span><span class=hl-0>)</span><br><br><span class=hl-0>  </span><span class=hl-5>sub</span><span class=hl-0>.</span><span class=hl-3>on</span><span class=hl-0>(</span><span class=hl-4>&quot;message&quot;</span><span class=hl-0>, </span><span class=hl-5>msg</span><span class=hl-0> </span><span class=hl-1>=&gt;</span><span class=hl-0> {</span><br><span class=hl-0>    </span><span class=hl-9>// Handle received message...</span><br><span class=hl-0>  })</span><br><span class=hl-0>})</span>
</code></pre><a href=#contribution id=contribution style=color:inherit;text-decoration:none><h2>Contribution</h2></a><p>If you are interested in making contributions to this project, please read the following sections.</p><a href=#dependencies id=dependencies style=color:inherit;text-decoration:none><h3>Dependencies</h3></a><p>In order to develop and test the library, you&#39;ll need the tools required to build from source (<a href=#building-from-source>see above</a>).<p>Additionally, having clang-format is strongly recommended.</p><a href=#defining-new-options id=defining-new-options style=color:inherit;text-decoration:none><h3>Defining new options</h3></a><p>Socket and context options can be set at runtime, even if they are not implemented by this library. By design, this requires no recompilation if the built version of ZeroMQ has support for them. This allows library users to test and use options that have been introduced in recent versions of ZeroMQ without having to modify this library. Of course we&#39;d love to include support for new options in an idiomatic way.<p>Options can be set as follows:<pre><code class=language-js><span class=hl-1>const</span><span class=hl-0> {</span><span class=hl-2>Dealer</span><span class=hl-0>} = </span><span class=hl-3>require</span><span class=hl-0>(</span><span class=hl-4>&quot;zeromq&quot;</span><span class=hl-0>)</span><br><br><span class=hl-9>/* This defines an accessor named &#39;sendHighWaterMark&#39;, which corresponds to</span><br><span class=hl-9>   the constant ZMQ_SNDHWM, which is defined as &#39;23&#39; in zmq.h. The option takes</span><br><span class=hl-9>   integers. The accessor name has been converted to idiomatic JavaScript.</span><br><span class=hl-9>   Of course, this particular option already exists in this library. */</span><br><span class=hl-1>class</span><span class=hl-0> </span><span class=hl-7>MyDealer</span><span class=hl-0> </span><span class=hl-1>extends</span><span class=hl-0> </span><span class=hl-7>Dealer</span><span class=hl-0> {</span><br><span class=hl-0>  </span><span class=hl-1>get</span><span class=hl-0> </span><span class=hl-3>sendHighWaterMark</span><span class=hl-0>(): </span><span class=hl-7>number</span><span class=hl-0> {</span><br><span class=hl-0>    </span><span class=hl-6>return</span><span class=hl-0> </span><span class=hl-1>this</span><span class=hl-0>.</span><span class=hl-3>getInt32Option</span><span class=hl-0>(</span><span class=hl-8>23</span><span class=hl-0>)</span><br><span class=hl-0>  }</span><br><br><span class=hl-0>  </span><span class=hl-1>set</span><span class=hl-0> </span><span class=hl-3>sendHighWaterMark</span><span class=hl-0>(</span><span class=hl-5>value</span><span class=hl-0>: </span><span class=hl-7>number</span><span class=hl-0>) {</span><br><span class=hl-0>    </span><span class=hl-1>this</span><span class=hl-0>.</span><span class=hl-3>setInt32Option</span><span class=hl-0>(</span><span class=hl-8>23</span><span class=hl-0>, </span><span class=hl-5>value</span><span class=hl-0>)</span><br><span class=hl-0>  }</span><br><span class=hl-0>}</span><br><br><span class=hl-1>const</span><span class=hl-0> </span><span class=hl-2>sock</span><span class=hl-0> = </span><span class=hl-1>new</span><span class=hl-0> </span><span class=hl-3>MyDealer</span><span class=hl-0>({</span><span class=hl-5>sendHighWaterMark:</span><span class=hl-0> </span><span class=hl-8>456</span><span class=hl-0>})</span>
</code></pre><p>When submitting pull requests for new socket/context options, please consider the following:<ul><li>The option is documented in the TypeScript interface.<li>The option is only added to relevant socket types, and if the ZMQ_ constant has a prefix indicating which type it applies to, it is stripped from the name as it is exposed in JavaScript.<li>The name as exposed in this library is idiomatic for JavaScript, spelling out any abbreviations and using proper <code>camelCase</code> naming conventions.<li>The option is a value that can be set on a socket, and you don&#39;t think it should actually be a method.</ul><a href=#testing id=testing style=color:inherit;text-decoration:none><h3>Testing</h3></a><p>The test suite can be run with:<pre><code class=language-sh><span class=hl-0>npm install</span><br><span class=hl-0>npm run build</span><br><span class=hl-0>npm run </span><span class=hl-3>test</span>
</code></pre><p>The test suite will validate and fix the coding style, run all unit tests and verify the validity of the included TypeScript type definitions.<p>Some tests are not enabled by default:<ul><li>API Compatibility tests from ZeroMQ 5.x have been disabled by default. You can include the tests with <code>INCLUDE_COMPAT_TESTS=1 npm run test</code><li>Some transports are not reliable on some older versions of ZeroMQ, the relevant tests will be skipped for those versions automatically.</ul><a href=#publishing id=publishing style=color:inherit;text-decoration:none><h3>Publishing</h3></a><p>To publish a new version, run:<pre><code class=language-sh><span class=hl-0>npm version &lt;new version&gt;</span><br><span class=hl-0>git push &amp;&amp; git push --tags</span>
</code></pre><p>Wait for continuous integration to finish. Prebuilds will be generated for all supported platforms and attached to a Github release. Documentation is automatically generated and committed to <code>gh-pages</code>. Finally, a new NPM package version will be automatically released.</p><a href=#history id=history style=color:inherit;text-decoration:none><h2>History</h2></a><p>Version 6+ is a complete rewrite of previous versions of ZeroMQ.js in order to be more reliable, correct, and usable in modern JavaScript &amp; TypeScript code as first outlined in <a href=https://github.com/zeromq/zeromq.js/issues/189>this issue</a>. Previous versions of ZeroMQ.js were based on <code>zmq</code> and a fork that included prebuilt binaries.<p>See detailed changes in the <a href=CHANGELOG.md>CHANGELOG</a>.</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><div class="tsd-navigation settings"><details class=tsd-index-accordion><summary class=tsd-accordion-summary><h3><svg width=20 height=20 viewBox="0 0 24 24"fill=none><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z"fill=var(--color-text)></path></svg> Settings</h3></summary><div class=tsd-accordion-details><div class=tsd-filter-visibility><h4 class=uppercase>Member Visibility</h4><form><ul id=tsd-filter-options><li class=tsd-filter-item><label class=tsd-filter-input><input type=checkbox id=tsd-filter-protected name=protected><svg width=32 height=32 viewBox="0 0 32 32"aria-hidden=true><rect class=tsd-checkbox-background width=30 height=30 x=1 y=1 rx=6 fill=none></rect><path class=tsd-checkbox-checkmark d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25"stroke=none stroke-width=3.5 stroke-linejoin=round fill=none></path></svg><span>Protected</span></label><li class=tsd-filter-item><label class=tsd-filter-input><input type=checkbox id=tsd-filter-inherited name=inherited checked=checked><svg width=32 height=32 viewBox="0 0 32 32"aria-hidden=true><rect class=tsd-checkbox-background width=30 height=30 x=1 y=1 rx=6 fill=none></rect><path class=tsd-checkbox-checkmark d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25"stroke=none stroke-width=3.5 stroke-linejoin=round fill=none></path></svg><span>Inherited</span></label><li class=tsd-filter-item><label class=tsd-filter-input><input type=checkbox id=tsd-filter-external name=external><svg width=32 height=32 viewBox="0 0 32 32"aria-hidden=true><rect class=tsd-checkbox-background width=30 height=30 x=1 y=1 rx=6 fill=none></rect><path class=tsd-checkbox-checkmark d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25"stroke=none stroke-width=3.5 stroke-linejoin=round fill=none></path></svg><span>External</span></label></ul></form></div><div class=tsd-theme-toggle><h4 class=uppercase>Theme</h4><select id=theme><option value=os>OS<option value=light>Light<option value=dark>Dark</select></div></div></details></div><nav class="tsd-navigation primary"><details class=tsd-index-accordion open><summary class=tsd-accordion-summary><h3><svg width=20 height=20 viewBox="0 0 24 24"fill=none><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z"fill=var(--color-text)></path></svg> Modules</h3></summary><div class=tsd-accordion-details><ul><li class="current selected"><a href=modules.html>zeromq.js</a><ul></ul></ul></div></details></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class=tsd-kind-class><a href=classes/Context.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><rect fill=var(--color-icon-background) stroke=var(--color-ts-class) stroke-width=1.5 x=1 y=1 width=22 height=22 rx=6 id=icon-128-path></rect><path d="M11.898 16.1201C11.098 16.1201 10.466 15.8961 10.002 15.4481C9.53803 15.0001 9.30603 14.3841 9.30603 13.6001V9.64012C9.30603 8.85612 9.53803 8.24012 10.002 7.79212C10.466 7.34412 11.098 7.12012 11.898 7.12012C12.682 7.12012 13.306 7.34812 13.77 7.80412C14.234 8.25212 14.466 8.86412 14.466 9.64012H13.386C13.386 9.14412 13.254 8.76412 12.99 8.50012C12.734 8.22812 12.37 8.09212 11.898 8.09212C11.426 8.09212 11.054 8.22412 10.782 8.48812C10.518 8.75212 10.386 9.13212 10.386 9.62812V13.6001C10.386 14.0961 10.518 14.4801 10.782 14.7521C11.054 15.0161 11.426 15.1481 11.898 15.1481C12.37 15.1481 12.734 15.0161 12.99 14.7521C13.254 14.4801 13.386 14.0961 13.386 13.6001H14.466C14.466 14.3761 14.234 14.9921 13.77 15.4481C13.306 15.8961 12.682 16.1201 11.898 16.1201Z"fill=var(--color-text) id=icon-128-text></path></svg>Context</a><li class=tsd-kind-class><a href=classes/Dealer.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-128-path></use><use href=#icon-128-text></use></svg>Dealer</a><li class=tsd-kind-class><a href=classes/Observer.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-128-path></use><use href=#icon-128-text></use></svg>Observer</a><li class=tsd-kind-class><a href=classes/Pair.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-128-path></use><use href=#icon-128-text></use></svg>Pair</a><li class=tsd-kind-class><a href=classes/Proxy.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-128-path></use><use href=#icon-128-text></use></svg>Proxy</a><li class=tsd-kind-class><a href=classes/Publisher.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-128-path></use><use href=#icon-128-text></use></svg>Publisher</a><li class=tsd-kind-class><a href=classes/Pull.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-128-path></use><use href=#icon-128-text></use></svg>Pull</a><li class=tsd-kind-class><a href=classes/Push.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-128-path></use><use href=#icon-128-text></use></svg>Push</a><li class=tsd-kind-class><a href=classes/Reply.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-128-path></use><use href=#icon-128-text></use></svg>Reply</a><li class=tsd-kind-class><a href=classes/Request.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-128-path></use><use href=#icon-128-text></use></svg>Request</a><li class=tsd-kind-class><a href=classes/Router.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-128-path></use><use href=#icon-128-text></use></svg>Router</a><li class=tsd-kind-class><a href=classes/Socket.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-128-path></use><use href=#icon-128-text></use></svg>Socket</a><li class=tsd-kind-class><a href=classes/Stream.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-128-path></use><use href=#icon-128-text></use></svg>Stream</a><li class=tsd-kind-class><a href=classes/Subscriber.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-128-path></use><use href=#icon-128-text></use></svg>Subscriber</a><li class=tsd-kind-class><a href=classes/XPublisher.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-128-path></use><use href=#icon-128-text></use></svg>XPublisher</a><li class=tsd-kind-class><a href=classes/XSubscriber.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-128-path></use><use href=#icon-128-text></use></svg>XSubscriber</a><li class=tsd-kind-interface><a href=interfaces/EventSubscriber.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><rect fill=var(--color-icon-background) stroke=var(--color-ts-interface) stroke-width=1.5 x=1 y=1 width=22 height=22 rx=6 id=icon-256-path></rect><path d="M9.51 16V15.016H11.298V8.224H9.51V7.24H14.19V8.224H12.402V15.016H14.19V16H9.51Z"fill=var(--color-text) id=icon-256-text></path></svg>Event<wbr>Subscriber</a><li class=tsd-kind-interface><a href=interfaces/Readable.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-256-path></use><use href=#icon-256-text></use></svg>Readable</a><li class=tsd-kind-interface><a href=interfaces/RouterConnectOptions.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-256-path></use><use href=#icon-256-text></use></svg>Router<wbr>Connect<wbr>Options</a><li class=tsd-kind-interface><a href=interfaces/StreamConnectOptions.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-256-path></use><use href=#icon-256-text></use></svg>Stream<wbr>Connect<wbr>Options</a><li class=tsd-kind-interface><a href=interfaces/Writable.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-256-path></use><use href=#icon-256-text></use></svg>Writable</a><li class=tsd-kind-type-alias><a href=types/Event.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><rect fill=var(--color-icon-background) stroke=var(--color-ts) stroke-width=1.5 x=1 y=1 width=22 height=22 rx=6 id=icon-4194304-path></rect><path d="M11.31 16V8.224H8.91V7.24H14.79V8.224H12.39V16H11.31Z"fill=var(--color-text) id=icon-4194304-text></path></svg>Event</a><li class=tsd-kind-type-alias><a href=types/EventOfType.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-4194304-path></use><use href=#icon-4194304-text></use></svg>Event<wbr>Of<wbr>Type</a><li class=tsd-kind-type-alias><a href=types/EventType.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-4194304-path></use><use href=#icon-4194304-text></use></svg>Event<wbr>Type</a><li class=tsd-kind-type-alias><a href=types/Message.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-4194304-path></use><use href=#icon-4194304-text></use></svg>Message</a><li class=tsd-kind-type-alias><a href=types/MessageLike.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-4194304-path></use><use href=#icon-4194304-text></use></svg>Message<wbr>Like</a><li class=tsd-kind-type-alias><a href=types/SocketOptions.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-4194304-path></use><use href=#icon-4194304-text></use></svg>Socket<wbr>Options</a><li class=tsd-kind-variable><a href=variables/capability.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><rect fill=var(--color-icon-background) stroke=var(--color-ts-variable) stroke-width=1.5 x=1 y=1 width=22 height=22 rx=6 id=icon-32-path></rect><path d="M11.106 16L8.85 7.24H9.966L11.454 13.192C11.558 13.608 11.646 13.996 11.718 14.356C11.79 14.708 11.842 14.976 11.874 15.16C11.906 14.976 11.954 14.708 12.018 14.356C12.09 13.996 12.178 13.608 12.282 13.192L13.758 7.24H14.85L12.582 16H11.106Z"fill=var(--color-text) id=icon-32-text></path></svg>capability</a><li class=tsd-kind-variable><a href=variables/context-1.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-32-path></use><use href=#icon-32-text></use></svg>context</a><li class=tsd-kind-variable><a href=variables/version.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><use href=#icon-32-path></use><use href=#icon-32-text></use></svg>version</a><li class=tsd-kind-function><a href=functions/curveKeyPair.html class=tsd-index-link><svg class=tsd-kind-icon width=24 height=24 viewBox="0 0 24 24"><rect fill=var(--color-icon-background) stroke=var(--color-ts-function) stroke-width=1.5 x=1 y=1 width=22 height=22 rx=6 id=icon-64-path></rect><path d="M9.39 16V7.24H14.55V8.224H10.446V11.128H14.238V12.112H10.47V16H9.39Z"fill=var(--color-text) id=icon-64-text></path></svg>curve<wbr>Key<wbr>Pair</a></ul></nav></div></div><div class="container tsd-generator"><p>Generated using <a href=https://typedoc.org/ target=_blank>TypeDoc</a></div><div class=overlay></div><script src=assets/main.js></script>